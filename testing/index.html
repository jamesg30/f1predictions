<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supabase Test</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
  <h1>Supabase Connection Test</h1>
  <button id="test-button">Test Supabase Connection</button>
  <pre id="result"></pre>

  <script>
    // Initialize Supabase
    const supabaseUrl = 'https://mbyhlefxnjjzmiwsvnaa.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ieWhsZWZ4bmpqem1pd3N2bmFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQzODQwOTgsImV4cCI6MjA0OTk2MDA5OH0.4gcUcOfhyTspbcDn6gPxBKFSTu3zUbkBdNEhMq9MdnY';
    const supabase = supabase.createClient(supabaseUrl, supabaseKey);

    // Function to test connection
    async function testSupabaseConnection() {
      const resultElement = document.getElementById('result');
      resultElement.textContent = 'Testing connection...';

      try {
        const { data, error } = await supabase.from('participants').select('*');
        if (error) {
          console.error('Error:', error);
          resultElement.textContent = `Error: ${error.message}`;
        } else {
          console.log('Data:', data);
          resultElement.textContent = `Connection successful! Data: ${JSON.stringify(data, null, 2)}`;
        }
      } catch (err) {
        console.error('Unexpected error:', err);
        resultElement.textContent = `Unexpected error: ${err.message}`;
      }
    }

    // Add event listener to the button
    document.getElementById('test-button').addEventListener('click', testSupabaseConnection);
  </script>
</body>
</html>